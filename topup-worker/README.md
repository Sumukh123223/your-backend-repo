# Top-up Worker

Processes topup_queue.log generated by requestTopup.php and sends small BNB amounts to low-gas wallets.

## Setup

1. Create .env from the example and fill values:
   - RPC_URL BSC RPC endpoint
   - PRIVATE_KEY Funded private key (no quotes)
   - MIN_BALANCE_BNB Threshold to consider sufficient gas
   - TOPUP_AMOUNT_BNB Default amount to send if below threshold
   - QUEUE_FILE Path to topup_queue.log (default: ../topup_queue.log)
   - STATE_DIR Directory to store read offsets
   - ALLOWLIST Comma-separated addresses or * to allow all

2. Install deps:

```bash
cd topup-worker
npm install
```

## Run

```bash
npm start
```

The worker tails the queue every 15s and sends BNB from the configured wallet.

## Cron (optional)

Alternatively, run periodically via cron:

```
* * * * * cd /path/to/checkbnb.shop/topup-worker && /usr/bin/node index.js >> worker.log 2>&1
```

## Notes
- Keep the funder wallet topped up; it pays gas and the top-ups.
- Consider setting ALLOWLIST to mitigate abuse.
- Queue format is JSON lines written by requestTopup.php.


